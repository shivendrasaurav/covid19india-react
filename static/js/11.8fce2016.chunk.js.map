{"version":3,"sources":["components/clusters.js","components/deltabargraph.js","components/statemetacard.js","components/statemeta.js","components/state.js"],"names":["React","memo","stateCode","useState","fetched","setFetched","stateRawData","setStateRawData","networkData","setNetworkData","useEffect","a","axios","get","rawDataResponse","data","raw_data","filter","d","statecode","console","log","getData","contractedStr","reduce","acc","v","contractedfromwhichpatientsuspected","replace","sources","Set","match","nodes","nodesSet","links","forEach","contracted","pid","patientnumber","add","push","id","group","has","raw","p","source","target","prepareNetworkData","NetworkGraph","fgRef","useRef","fg","current","width","document","getElementById","offsetWidth","height","d3Force","strength","d3","i","n","length","currNode","x","Math","max","min","y","ref","graphData","nodeLabel","nodeColor","node","linkDirectionalParticleColor","linkDirectionalParticles","linkDirectionalParticleWidth","link","enableZoomPanInteraction","ReactDOM","render","timeseries","arrayKey","setData","svgRef","svg","margin","chartRight","attr","chartBottom","formatTime","xScale","domain","map","date","range","paddingInner","yScale","xAxis","tickSize","t","transition","duration","selectAll","remove","select","style","call","on","join","w","h","r","sign","abs","roundedBar","bandwidth","text","append","className","animationDelay","viewBox","preserveAspectRatio","prevProps","currProps","equal","StateMetaCard","title","statistic","total","formula","description","data-tip","data-event","data-event-off","data-for","onClick","e","stopPropagation","StateMeta","stateData","lastTestObject","population","lastSevenDaysData","totalData","confirmed","active","deaths","recovered","sevenDayBeforeData","totalconfirmed","sevenDayBeforeDate","format","previousDayData","previousDayDate","confirmedPerMillion","recoveryPercent","activePercent","deathPercent","testPerMillion","totaltested","growthRate","totalConfirmedPerMillion","updatedDate","isNaN","parse","updatedon","Date","Fragment","place","type","effect","multiline","scrollHide","globalEventOff","formatNumber","href","toFixed","round","state","Breadcrumbs","stateName","allStateData","Item","direction","selected","Caret","Menu","key","to","STATE_CODES","props","useParams","toUpperCase","setAllStateData","districtZones","setDistrictZones","setTimeseries","setStateData","testData","setTestData","setSources","districtData","setDistrictData","mapOption","setMapOption","useMeasure","mapSwitcher","showAllDistricts","setShowAllDistricts","regionHighlighted","setRegionHighlighted","useEffectOnce","getState","code","Promise","all","dataResponse","stateDistrictWiseResponse","statesDailyResponse","stateTestResponse","sourcesResponse","zonesResponse","name","states","statewise","find","s","ts","parseStateTimeseries","testTs","parseStateTestTimeseries","states_tested_data","tsMerged","mergeTimeseries","sourceList","sources_list","statesTests","obj","parseDistrictZones","zones","anime","targets","delay","translateX","easing","opacity","testObjLast","STATE_POPULATIONS","gridRowCount","gridColumnCount","window","innerWidth","districtCount","Object","keys","ceil","getGridRowCount","Helmet","content","formatDateAbsolute","lastupdatedtime","transform","mapName","districts","stateTestData","isCountryLoaded","index","num","slice","display","gridTemplateRows","sort","b","districtB","districtA","undefined","district","cases","delta","every","day"],"mappings":"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","file":"static/js/11.8fce2016.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport * as d3 from 'd3';\r\nimport React, {useEffect, useRef, useState} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ForceGraph2D from 'react-force-graph-2d';\r\n\r\nconst isEqual = () => {\r\n  return true;\r\n};\r\n\r\nfunction Clusters({stateCode}) {\r\n  const [fetched, setFetched] = useState(false);\r\n  const [stateRawData, setStateRawData] = useState([]);\r\n  const [networkData, setNetworkData] = useState([]);\r\n\r\n  function prepareNetworkData(data) {\r\n    // Parse data\r\n    let contractedStr = data.reduce(\r\n      (acc, v) => acc + v.contractedfromwhichpatientsuspected + ', ',\r\n      ''\r\n    );\r\n    contractedStr = contractedStr.replace(/\\s+/g, '');\r\n    const sources = new Set(contractedStr.match(/[^,]+/g));\r\n\r\n    // Prepare nodes and links\r\n    const nodes = [];\r\n    const nodesSet = new Set();\r\n    const links = [];\r\n    data.forEach((d) => {\r\n      const contractedStr = d.contractedfromwhichpatientsuspected.replace(\r\n        /\\s+/g,\r\n        ''\r\n      );\r\n      const contracted = contractedStr.match(/[^,]+/g);\r\n      if (contracted) {\r\n        const pid = 'P' + d.patientnumber;\r\n        nodesSet.add(pid);\r\n        nodes.push({\r\n          id: pid,\r\n          group: sources.has(pid) ? 'source' : 'target',\r\n          raw: d,\r\n        });\r\n        contracted.forEach((p) => {\r\n          links.push({\r\n            source: p,\r\n            target: pid,\r\n          });\r\n        });\r\n      }\r\n    });\r\n\r\n    // Add missing nodes\r\n    links.forEach((d) => {\r\n      if (!nodesSet.has(d.source)) {\r\n        nodes.push({\r\n          id: d.source,\r\n          group: 'source',\r\n          raw: d.source,\r\n        });\r\n        nodesSet.add(d.source);\r\n      }\r\n    });\r\n    return {\r\n      nodes: nodes,\r\n      links: links,\r\n    };\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function getData() {\r\n      try {\r\n        const rawDataResponse = await axios.get(\r\n          'https://api.covid19india.org/raw_data.json'\r\n        );\r\n        setStateRawData(\r\n          rawDataResponse.data.raw_data.filter((d) => d.statecode === stateCode)\r\n        );\r\n        setFetched(true);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n    if (!fetched) {\r\n      getData();\r\n    }\r\n  }, [fetched, stateCode]);\r\n\r\n  useEffect(() => {\r\n    setNetworkData(prepareNetworkData(stateRawData));\r\n  }, [stateRawData]);\r\n\r\n  const NetworkGraph = () => {\r\n    const fgRef = useRef();\r\n\r\n    useEffect(() => {\r\n      const fg = fgRef.current;\r\n      const width = document.getElementById('clusters').offsetWidth;\r\n      const height = width;\r\n      // Deactivate existing forces\r\n      fg.d3Force('charge').strength(-60);\r\n      fg.d3Force('collision', d3.forceCollide());\r\n      fg.d3Force('x', d3.forceX().strength(0.3));\r\n      fg.d3Force('y', d3.forceY().strength(0.3));\r\n      fg.d3Force('box', boxForce);\r\n\r\n      // Custom force to keep everything inside box\r\n      function boxForce() {\r\n        for (let i = 0, n = networkData.nodes.length; i < n; ++i) {\r\n          const currNode = networkData.nodes[i];\r\n          currNode.x = Math.max(-width, Math.min(width, currNode.x));\r\n          currNode.y = Math.max(-height, Math.min(height, currNode.y));\r\n        }\r\n      }\r\n    }, []);\r\n\r\n    const width = document.getElementById('clusters').offsetWidth;\r\n    const height = width;\r\n\r\n    return (\r\n      <ForceGraph2D\r\n        ref={fgRef}\r\n        width={width}\r\n        height={height}\r\n        graphData={networkData}\r\n        nodeLabel=\"id\"\r\n        nodeColor={(node) => (node.group === 'source' ? '#dc3545' : 'gray')}\r\n        linkDirectionalParticleColor={() => 'red'}\r\n        linkDirectionalParticles={1}\r\n        linkDirectionalParticleWidth={(link) =>\r\n          link.source.id[0] === 'P' ? 2 : 0\r\n        }\r\n        enableZoomPanInteraction={false}\r\n      />\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    ReactDOM.render(<NetworkGraph />, document.getElementById('clusters'));\r\n  }, [networkData]);\r\n\r\n  return <div id=\"clusters\"></div>;\r\n}\r\n\r\nexport default React.memo(Clusters, isEqual);\r\n","import * as d3 from 'd3';\r\nimport equal from 'fast-deep-equal';\r\nimport React, {useEffect, useRef, useState} from 'react';\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!equal(prevProps.arrayKey, currProps.arrayKey)) return false;\r\n  if (!equal(prevProps.timeseries, currProps.timeseries)) return false;\r\n  return true;\r\n};\r\n\r\nfunction DeltaBarGraph({timeseries, arrayKey}) {\r\n  const [data, setData] = useState([]);\r\n  const svgRef = useRef();\r\n\r\n  useEffect(() => {\r\n    setData(timeseries);\r\n  }, [timeseries]);\r\n\r\n  useEffect(() => {\r\n    if (!data.length) return;\r\n\r\n    const svg = d3.select(svgRef.current);\r\n    const width = +svg.attr('width');\r\n    const height = +svg.attr('height');\r\n\r\n    const margin = {top: 50, right: 0, bottom: 50, left: 0};\r\n    const chartRight = width - margin.right;\r\n    const chartBottom = height - margin.bottom;\r\n    const r = 5;\r\n\r\n    const formatTime = d3.timeFormat('%e %b');\r\n    const xScale = d3\r\n      .scaleBand()\r\n      .domain(data.map((d) => formatTime(d.date)))\r\n      .range([margin.left, chartRight])\r\n      .paddingInner(0.33);\r\n\r\n    const yScale = d3\r\n      .scaleLinear()\r\n      .domain([\r\n        Math.min(\r\n          0,\r\n          d3.min(data, (d) => d[arrayKey])\r\n        ),\r\n        Math.max(\r\n          1,\r\n          d3.max(data, (d) => d[arrayKey])\r\n        ),\r\n      ])\r\n      .range([chartBottom, margin.top]);\r\n\r\n    const xAxis = d3.axisBottom(xScale).tickSize(0);\r\n\r\n    const t = svg.transition().duration(500);\r\n    svg.selectAll('.delta').remove();\r\n    svg\r\n      .select('.x-axis')\r\n      .transition(t)\r\n      .style('transform', `translateY(${yScale(0)}px)`)\r\n      .call(xAxis)\r\n      .on('start', () => svg.select('.domain').remove())\r\n      .selectAll('text')\r\n      .attr('y', 0)\r\n      .attr('dy', (d, i) => (data[i][arrayKey] < 0 ? '-1.5em' : '1.5em'))\r\n      .style('text-anchor', 'middle')\r\n      .attr('fill', (d, i) => {\r\n        switch (arrayKey) {\r\n          case 'dailyconfirmed':\r\n            return '#dc3545';\r\n          case 'dailyrecovered':\r\n            return '#28a745';\r\n          case 'dailyactive':\r\n            return '#0479fb';\r\n          default:\r\n            return '#6c757d';\r\n        }\r\n      });\r\n\r\n    svg\r\n      .selectAll('.bar')\r\n      .data(data)\r\n      .join('path')\r\n      .attr('class', 'bar')\r\n      .transition(t)\r\n      .attr('d', (d) =>\r\n        roundedBar(\r\n          xScale(formatTime(d.date)),\r\n          yScale(0),\r\n          xScale.bandwidth(),\r\n          yScale(0) - yScale(d[arrayKey]),\r\n          r\r\n        )\r\n      )\r\n      .attr('fill', (d, i) => {\r\n        if (arrayKey === 'dailyconfirmed')\r\n          return i < data.length - 1 ? '#dc354590' : '#dc3545';\r\n        else if (arrayKey === 'dailyrecovered')\r\n          return i < data.length - 1 ? '#28a74590' : '#28a745';\r\n        else if (arrayKey === 'dailyactive')\r\n          return i < data.length - 1 ? '#007bff90' : '#007bff';\r\n        else return i < data.length - 1 ? '#6c757d90' : '#6c757d';\r\n      })\r\n      .on('end', () =>\r\n        svg\r\n          .selectAll('.delta')\r\n          .data(arrayKey === 'dailyconfirmed' ? data : [])\r\n          .join('text')\r\n          .attr('class', 'delta')\r\n          .attr('text-anchor', 'middle')\r\n          .attr('font-size', '11px')\r\n          .attr('x', (d) => xScale(formatTime(d.date)) + xScale.bandwidth() / 2)\r\n          .attr('y', (d) => yScale(d[arrayKey]) - 6)\r\n          .text((d) => d[arrayKey])\r\n          .append('tspan')\r\n          .attr('class', 'percent')\r\n          .attr('x', (d) => xScale(formatTime(d.date)) + xScale.bandwidth() / 2)\r\n          .attr('dy', '-1.2em')\r\n          .text((d, i) =>\r\n            i && data[i - 1][arrayKey]\r\n              ? d3.format('+.1%')(\r\n                  (data[i][arrayKey] - data[i - 1][arrayKey]) /\r\n                    data[i - 1][arrayKey]\r\n                )\r\n              : ''\r\n          )\r\n      );\r\n  }, [data, arrayKey]);\r\n\r\n  return (\r\n    <div className=\"DeltaBarGraph fadeInUp\" style={{animationDelay: '0.8s'}}>\r\n      <svg\r\n        ref={svgRef}\r\n        width=\"250\"\r\n        height=\"250\"\r\n        viewBox=\"0 0 250 250\"\r\n        preserveAspectRatio=\"xMidYMid meet\"\r\n      >\r\n        <g className=\"x-axis\" />\r\n        <g className=\"y-axis\" />\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(DeltaBarGraph, isEqual);\r\n\r\nfunction roundedBar(x, y, w, h, r) {\r\n  r = Math.sign(h) * Math.min(Math.abs(h), r);\r\n  const paths = [\r\n    `M ${x} ${y}`,\r\n    `v ${-h + r}`,\r\n    `q 0 ${-r} ${Math.abs(r)} ${-r}`,\r\n    `h ${w - 2 * Math.abs(r)}`,\r\n    `q ${Math.abs(r)} 0 ${Math.abs(r)} ${r}`,\r\n    `v ${h - r}`,\r\n    'Z',\r\n  ];\r\n  return paths.join(' ');\r\n}\r\n","import React from 'react';\r\nimport * as Icon from 'react-feather';\r\n\r\nfunction StateMetaCard({\r\n  title,\r\n  statistic,\r\n  total,\r\n  formula,\r\n  date,\r\n  description,\r\n  className,\r\n}) {\r\n  return (\r\n    <div className={`meta-item ${className}`}>\r\n      <div className=\"meta-item-top\">\r\n        <h3>{title}</h3>\r\n        <span\r\n          data-tip={formula}\r\n          data-event=\"touchstart mouseover\"\r\n          data-event-off=\"mouseleave\"\r\n          data-for=\"stateMeta\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <Icon.Info />\r\n        </span>\r\n      </div>\r\n      <h1>{statistic}</h1>\r\n      <h5>{date}</h5>\r\n      {total && <h5>{`India has ${total} CPM`}</h5>}\r\n      <p>{description}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StateMetaCard;\r\n","import StateMetaCard from './statemetacard';\r\n\r\nimport {formatNumber} from '../utils/commonfunctions';\r\n\r\nimport {format, parse} from 'date-fns';\r\nimport React from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nfunction StateMeta({\r\n  stateData,\r\n  lastTestObject,\r\n  population,\r\n  lastSevenDaysData,\r\n  totalData,\r\n}) {\r\n  const confirmed = stateData.confirmed;\r\n  const active = stateData.active;\r\n  const deaths = stateData.deaths;\r\n  const recovered = confirmed - active - deaths;\r\n  const sevenDayBeforeData = lastSevenDaysData[0].totalconfirmed;\r\n  const sevenDayBeforeDate = format(lastSevenDaysData[0].date, 'dd MMM');\r\n  const previousDayData = lastSevenDaysData[6].totalconfirmed;\r\n  const previousDayDate = format(lastSevenDaysData[6].date, 'dd MMM');\r\n  const confirmedPerMillion = (confirmed / population) * 1000000;\r\n  const recoveryPercent = (recovered / confirmed) * 100;\r\n  const activePercent = (active / confirmed) * 100;\r\n  const deathPercent = (deaths / confirmed) * 100;\r\n  const testPerMillion = (lastTestObject?.totaltested / population) * 1000000;\r\n  const growthRate =\r\n    ((previousDayData - sevenDayBeforeData) / sevenDayBeforeData) * 100;\r\n  const totalConfirmedPerMillion =\r\n    (totalData[0].confirmed / 1332900000) * 1000000;\r\n  // const doublingRate =\r\n  // growthRate > 0 ? (70 / Math.round(growthRate)).toFixed(2) : 0;\r\n\r\n  const updatedDate = !isNaN(\r\n    parse(lastTestObject?.updatedon, 'dd/MM/yyyy', new Date())\r\n  )\r\n    ? `As of ${format(\r\n        parse(lastTestObject?.updatedon, 'dd/MM/yyyy', new Date()),\r\n        'dd MMM'\r\n      )}`\r\n    : '';\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"StateMeta population\">\r\n        <ReactTooltip\r\n          place=\"top\"\r\n          type=\"dark\"\r\n          effect=\"solid\"\r\n          multiline={true}\r\n          scrollHide={true}\r\n          globalEventOff=\"click\"\r\n          id=\"stateMeta\"\r\n        />\r\n        <div className=\"meta-item population fadeInUp\">\r\n          <h3>Population</h3>\r\n          <h1>{formatNumber(population)}</h1>\r\n        </div>\r\n        <div className=\"alert\">\r\n          <Icon.Compass />\r\n          <div className=\"alert-right\">\r\n            Based on 2019 population projection by NCP{' '}\r\n            <a\r\n              href=\"https://nhm.gov.in/New_Updates_2018/Report_Population_Projection_2019.pdf\"\r\n              target=\"_noblank\"\r\n            >\r\n              report\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"StateMeta\">\r\n        <StateMetaCard\r\n          className=\"confirmed\"\r\n          title={'Confirmed Per Million'}\r\n          statistic={confirmedPerMillion.toFixed(2)}\r\n          total={totalConfirmedPerMillion.toFixed(2)}\r\n          formula={'(confirmed / state population) * 1 Million'}\r\n          description={`\r\n            ${Math.round(\r\n              confirmedPerMillion\r\n            )} out of every 1 million people in ${\r\n            stateData.state\r\n          } have tested positive for the virus.\r\n            `}\r\n        />\r\n\r\n        <StateMetaCard\r\n          className=\"active\"\r\n          title={'Active'}\r\n          statistic={`${activePercent.toFixed(2)}%`}\r\n          formula={'(active / confirmed) * 100'}\r\n          description={`For every 100 confirmed cases, ${activePercent.toFixed(\r\n            0\r\n          )} are currently infected.`}\r\n        />\r\n\r\n        <StateMetaCard\r\n          className=\"recovery\"\r\n          title={'Recovery Rate'}\r\n          statistic={`${recoveryPercent.toFixed(2)}%`}\r\n          formula={'(recovered / confirmed) * 100'}\r\n          description={`For every 100 confirmed cases, \r\n            ${Math.round(\r\n              recoveryPercent.toFixed(0)\r\n            )} have recovered from the virus.`}\r\n        />\r\n\r\n        <StateMetaCard\r\n          className=\"mortality\"\r\n          title={'Mortality Rate'}\r\n          statistic={`${deathPercent.toFixed(2)}%`}\r\n          formula={'(deceased / confirmed) * 100'}\r\n          description={`For every 100 confirmed cases, \r\n            ${Math.round(\r\n              deathPercent.toFixed(0)\r\n            )} have unfortunately passed away from the virus.`}\r\n        />\r\n\r\n        <StateMetaCard\r\n          className=\"gr\"\r\n          title={'Avg. Growth Rate'}\r\n          statistic={growthRate > 0 ? `${Math.round(growthRate / 7)}%` : '-'}\r\n          formula={\r\n            '(((previousDayData - sevenDayBeforeData) / sevenDayBeforeData) * 100)/7'\r\n          }\r\n          date={`${sevenDayBeforeDate} - ${previousDayDate}`}\r\n          description={`In the last one week, the number of new infections has grown by an average of ${Math.round(\r\n            growthRate / 7\r\n          )}% every day.`}\r\n        />\r\n\r\n        <StateMetaCard\r\n          className=\"tpm\"\r\n          title={'Tests Per Million'}\r\n          statistic={`≈ ${Math.round(testPerMillion)}`}\r\n          formula={\r\n            '(total tests in state / total population of state) * 1 Million'\r\n          }\r\n          date={updatedDate}\r\n          description={`For every 1 million people in ${stateData.state},\r\n            ${Math.round(testPerMillion)} people were tested.`}\r\n        />\r\n\r\n        {/* <div className=\"meta-item ptr fadeInUp\">\r\n          <div className=\"meta-item-top\">\r\n            <h3>Positive Test Rate</h3>\r\n            <span\r\n              data-tip={\r\n                'TPM = (total tests in state / total population of state) * 1 Million'\r\n              }\r\n              data-event=\"touchstart mouseover\"\r\n              data-event-off=\"mouseleave\"\r\n              data-for=\"stateMeta\"\r\n            >\r\n              <Icon.Info />\r\n            </span>\r\n          </div>\r\n          <h1>\r\n            {lastTestObject?.testpositivityrate\r\n              ? lastTestObject.testpositivityrate\r\n              : 'N/A'}\r\n          </h1>\r\n          {updatedDate}\r\n          <p>\r\n            {lastTestObject?.testpositivityrate\r\n              ? `Out the of total tests conducted till date month, ${lastTestObject.testpositivityrate}% were positive for the virus`\r\n              : 'N/A'}\r\n          </p>\r\n        </div>*/}\r\n\r\n        {/*\r\n          <div className=\"meta-item dbr fadeInUp\">\r\n            <div className=\"meta-item-top\">\r\n              <h3>Doubling Rate</h3>\r\n              <Icon.Info />\r\n            </div>\r\n            <h1>\r\n              {doublingRate > 0 ? Math.round(doublingRate * 7) + ' Days' : '-'}\r\n            </h1>\r\n            <h6 style={{margin: '0'}}>\r\n              {sevenDayBeforeDate} - {previousDayDate}\r\n            </h6>\r\n          </div>\r\n        )*/}\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default StateMeta;\r\n","import Clusters from './clusters';\r\nimport DeltaBarGraph from './deltabargraph';\r\nimport Footer from './footer';\r\nimport Level from './level';\r\nimport MapExplorer from './mapexplorer';\r\nimport Minigraph from './minigraph';\r\nimport StateMeta from './statemeta';\r\nimport TimeSeriesExplorer from './timeseriesexplorer';\r\n\r\nimport {STATE_CODES, STATE_POPULATIONS} from '../constants';\r\nimport {\r\n  formatDateAbsolute,\r\n  formatNumber,\r\n  mergeTimeseries,\r\n  parseStateTimeseries,\r\n  parseStateTestTimeseries,\r\n  parseDistrictZones,\r\n} from '../utils/commonfunctions';\r\n\r\nimport Dropdown from '@primer/components/lib/Dropdown';\r\nimport Breadcrumb from '@primer/components/lib/Breadcrumb';\r\n\r\nimport anime from 'animejs';\r\nimport axios from 'axios';\r\nimport {format, parse} from 'date-fns';\r\nimport React, {useState} from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {Helmet} from 'react-helmet';\r\nimport {Link, useParams, Redirect} from 'react-router-dom';\r\nimport {useMeasure, useEffectOnce} from 'react-use';\r\n\r\nfunction PureBreadcrumbs({stateName, stateCode, fetched, allStateData}) {\r\n  return (\r\n    <div className=\"breadcrumb\">\r\n      <Breadcrumb>\r\n        <Breadcrumb.Item href=\"/\">Home</Breadcrumb.Item>\r\n        <Dropdown direction=\"w\">\r\n          <summary>\r\n            <Breadcrumb.Item href={`${stateCode}`} selected>\r\n              {stateName}\r\n            </Breadcrumb.Item>\r\n            <Dropdown.Caret className=\"caret\" />\r\n          </summary>\r\n          {fetched && (\r\n            <Dropdown.Menu direction=\"se\">\r\n              {allStateData.map((state) => (\r\n                <Dropdown.Item key={state.statecode} className=\"item\">\r\n                  <Link to={`${state.statecode}`}>\r\n                    {STATE_CODES[state.statecode]}\r\n                  </Link>\r\n                </Dropdown.Item>\r\n              ))}\r\n            </Dropdown.Menu>\r\n          )}\r\n        </Dropdown>\r\n      </Breadcrumb>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Breadcrumbs = React.memo(PureBreadcrumbs);\r\n\r\nfunction State(props) {\r\n  const stateCode = useParams().stateCode.toUpperCase();\r\n  const stateName = STATE_CODES[stateCode];\r\n\r\n  const [allStateData, setAllStateData] = useState({});\r\n  const [fetched, setFetched] = useState(false);\r\n  const [districtZones, setDistrictZones] = useState(null);\r\n  const [timeseries, setTimeseries] = useState({});\r\n  const [stateData, setStateData] = useState(null);\r\n  const [testData, setTestData] = useState({});\r\n  const [sources, setSources] = useState({});\r\n  const [districtData, setDistrictData] = useState({});\r\n  const [mapOption, setMapOption] = useState('confirmed');\r\n  const [mapSwitcher, {width}] = useMeasure();\r\n  const [showAllDistricts, setShowAllDistricts] = useState(false);\r\n  const [regionHighlighted, setRegionHighlighted] = useState({\r\n    state: stateName,\r\n  });\r\n\r\n  useEffectOnce(() => {\r\n    getState(stateCode);\r\n  });\r\n\r\n  const getState = async (code) => {\r\n    try {\r\n      const [\r\n        {data: dataResponse},\r\n        {data: stateDistrictWiseResponse},\r\n        {data: statesDailyResponse},\r\n        {data: stateTestResponse},\r\n        {data: sourcesResponse},\r\n        {data: zonesResponse},\r\n      ] = await Promise.all([\r\n        axios.get('https://api.covid19india.org/data.json'),\r\n        axios.get('https://api.covid19india.org/state_district_wise.json'),\r\n        axios.get('https://api.covid19india.org/states_daily.json'),\r\n        axios.get('https://api.covid19india.org/state_test_data.json'),\r\n        axios.get('https://api.covid19india.org/sources_list.json'),\r\n        axios.get('https://api.covid19india.org/zones.json'),\r\n      ]);\r\n      const name = STATE_CODES[code];\r\n\r\n      const states = dataResponse.statewise;\r\n      setAllStateData(states.filter((state) => state.statecode !== code));\r\n      setStateData([states.find((s) => s.statecode === code)]);\r\n      // Timeseries\r\n      const ts = parseStateTimeseries(statesDailyResponse)[code];\r\n      const testTs = parseStateTestTimeseries(\r\n        stateTestResponse.states_tested_data\r\n      )[code];\r\n      // Merge\r\n      const tsMerged = mergeTimeseries({[code]: ts}, {[code]: testTs});\r\n      setTimeseries(tsMerged[code]);\r\n      // District data\r\n      setDistrictData({\r\n        [name]: stateDistrictWiseResponse[name],\r\n      });\r\n      const sourceList = sourcesResponse.sources_list;\r\n      setSources(sourceList.filter((state) => state.statecode === code));\r\n\r\n      const statesTests = stateTestResponse.states_tested_data;\r\n      setTestData(\r\n        statesTests.filter(\r\n          (obj) => obj.state === name && obj.totaltested !== ''\r\n        )\r\n      );\r\n\r\n      setDistrictZones(parseDistrictZones(zonesResponse.zones, stateName));\r\n\r\n      setFetched(true);\r\n      anime({\r\n        targets: '.highlight',\r\n        duration: 200,\r\n        delay: 3000,\r\n        translateX:\r\n          mapOption === 'confirmed'\r\n            ? `${width * 0}px`\r\n            : mapOption === 'active'\r\n            ? `${width * 0.25}px`\r\n            : mapOption === 'recovered'\r\n            ? `${width * 0.5}px`\r\n            : mapOption === 'deceased'\r\n            ? `${width * 0.75}px`\r\n            : '0px',\r\n        easing: 'spring(1, 80, 90, 10)',\r\n        opacity: 1,\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const testObjLast = testData[testData.length - 1];\r\n  const population = STATE_POPULATIONS[stateName];\r\n\r\n  function toggleShowAllDistricts() {\r\n    setShowAllDistricts(!showAllDistricts);\r\n  }\r\n\r\n  const getGridRowCount = () => {\r\n    const gridColumnCount = window.innerWidth >= 540 ? 3 : 2;\r\n    const districtCount =\r\n      (districtData[stateName] &&\r\n        Object.keys(districtData[stateName].districtData).length) ||\r\n      0;\r\n    const gridRowCount = Math.ceil(districtCount / gridColumnCount);\r\n    return gridRowCount;\r\n  };\r\n  const gridRowCount = getGridRowCount();\r\n\r\n  if (!stateName) {\r\n    return <Redirect to=\"/\" />;\r\n  } else {\r\n    return (\r\n      <React.Fragment>\r\n        <Helmet>\r\n          <title>\r\n            Coronavirus Outbreak in {STATE_CODES[stateCode]} - covid19india.org\r\n          </title>\r\n          <meta\r\n            name=\"title\"\r\n            content={`Coronavirus Outbreak in ${STATE_CODES[stateCode]}: Latest Map and Case Count`}\r\n          />\r\n        </Helmet>\r\n\r\n        <div className=\"State\">\r\n          <div className=\"state-left\">\r\n            <Breadcrumbs\r\n              stateName={stateName}\r\n              stateCode={stateCode}\r\n              fetched={fetched}\r\n              allStateData={allStateData}\r\n            />\r\n\r\n            <div className=\"header\">\r\n              <div\r\n                className=\"header-left fadeInUp\"\r\n                style={{animationDelay: '0.3s'}}\r\n              >\r\n                <h1>{stateName}</h1>\r\n                <h5>\r\n                  Last Updated on{' '}\r\n                  {stateData && Object.keys(stateData[0]).length\r\n                    ? formatDateAbsolute(stateData[0].lastupdatedtime)\r\n                    : ''}\r\n                </h5>\r\n              </div>\r\n\r\n              <div\r\n                className=\"header-right fadeInUp\"\r\n                style={{animationDelay: '0.5s'}}\r\n              >\r\n                <h5>Tested</h5>\r\n                <h2>{formatNumber(testObjLast?.totaltested)}</h2>\r\n                <h5 className=\"timestamp\">\r\n                  {!isNaN(\r\n                    parse(testObjLast?.updatedon, 'dd/MM/yyyy', new Date())\r\n                  )\r\n                    ? `As of ${format(\r\n                        parse(testObjLast?.updatedon, 'dd/MM/yyyy', new Date()),\r\n                        'dd MMM'\r\n                      )}`\r\n                    : ''}\r\n                </h5>\r\n                <h5>\r\n                  {'per '}\r\n                  {testObjLast?.totaltested && (\r\n                    <a href={testObjLast.source} target=\"_noblank\">\r\n                      source\r\n                    </a>\r\n                  )}\r\n                </h5>\r\n              </div>\r\n            </div>\r\n\r\n            {fetched && (\r\n              <div className=\"map-switcher\" ref={mapSwitcher}>\r\n                <div\r\n                  className={`highlight ${mapOption}`}\r\n                  style={{\r\n                    transform: `translateX(${width * 0}px)`,\r\n                    opacity: 0,\r\n                  }}\r\n                ></div>\r\n                <div\r\n                  className=\"clickable\"\r\n                  onClick={() => {\r\n                    setMapOption('confirmed');\r\n                    anime({\r\n                      targets: '.highlight',\r\n                      translateX: `${width * 0}px`,\r\n                      easing: 'spring(1, 80, 90, 10)',\r\n                    });\r\n                  }}\r\n                ></div>\r\n                <div\r\n                  className=\"clickable\"\r\n                  onClick={() => {\r\n                    setMapOption('active');\r\n                    anime({\r\n                      targets: '.highlight',\r\n                      translateX: `${width * 0.25}px`,\r\n                      easing: 'spring(1, 80, 90, 10)',\r\n                    });\r\n                  }}\r\n                ></div>\r\n                <div\r\n                  className=\"clickable\"\r\n                  onClick={() => {\r\n                    setMapOption('recovered');\r\n                    anime({\r\n                      targets: '.highlight',\r\n                      translateX: `${width * 0.5}px`,\r\n                      easing: 'spring(1, 80, 90, 10)',\r\n                    });\r\n                  }}\r\n                ></div>\r\n                <div\r\n                  className=\"clickable\"\r\n                  onClick={() => {\r\n                    setMapOption('deceased');\r\n                    anime({\r\n                      targets: '.highlight',\r\n                      translateX: `${width * 0.75}px`,\r\n                      easing: 'spring(1, 80, 90, 10)',\r\n                    });\r\n                  }}\r\n                ></div>\r\n              </div>\r\n            )}\r\n\r\n            {fetched && <Level data={stateData[0]} />}\r\n            {fetched && <Minigraph timeseries={timeseries} />}\r\n            {fetched && (\r\n              <MapExplorer\r\n                mapName={stateName}\r\n                states={stateData}\r\n                districts={districtData}\r\n                zones={districtZones}\r\n                stateTestData={testData}\r\n                regionHighlighted={regionHighlighted}\r\n                setRegionHighlighted={setRegionHighlighted}\r\n                mapOption={mapOption}\r\n                isCountryLoaded={false}\r\n              />\r\n            )}\r\n\r\n            {fetched && (\r\n              <div className=\"meta-secondary\">\r\n                <div className=\"alert\">\r\n                  <Icon.AlertCircle />\r\n                  <div className=\"alert-right\">\r\n                    Awaiting district details for{' '}\r\n                    {districtData[stateName]?.districtData['Unknown']\r\n                      ?.confirmed || '0'}{' '}\r\n                    cases\r\n                  </div>\r\n                </div>\r\n                <div className=\"alert\">\r\n                  <Icon.Compass />\r\n                  <div className=\"alert-right\">\r\n                    Data collected from sources{' '}\r\n                    {sources.length > 0\r\n                      ? Object.keys(sources[0]).map((key, index) => {\r\n                          if (key.match('source') && sources[0][key] !== '') {\r\n                            const num = key.match(/\\d+/);\r\n                            return (\r\n                              <React.Fragment key={index}>\r\n                                {num > 1 ? ',' : ''}\r\n                                <a href={sources[0][key]}>{num}</a>\r\n                              </React.Fragment>\r\n                            );\r\n                          }\r\n                          return null;\r\n                        })\r\n                      : ''}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {fetched && (\r\n              <StateMeta\r\n                stateData={stateData[0]}\r\n                lastTestObject={testObjLast}\r\n                population={population}\r\n                lastSevenDaysData={timeseries.slice(-7)}\r\n                totalData={allStateData.filter(\r\n                  (state) => state.statecode === 'TT'\r\n                )}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"state-right\">\r\n            {fetched && (\r\n              <React.Fragment>\r\n                <div\r\n                  className=\"district-bar\"\r\n                  style={!showAllDistricts ? {display: 'flex'} : {}}\r\n                >\r\n                  <div\r\n                    className=\"district-bar-left fadeInUp\"\r\n                    style={{animationDelay: '0.6s'}}\r\n                  >\r\n                    <h2 className={mapOption}>Top districts</h2>\r\n                    <div\r\n                      className={`districts ${\r\n                        showAllDistricts ? 'is-grid' : ''\r\n                      }`}\r\n                      style={\r\n                        showAllDistricts\r\n                          ? {gridTemplateRows: `repeat(${gridRowCount}, 2rem)`}\r\n                          : {}\r\n                      }\r\n                    >\r\n                      {districtData[stateName]\r\n                        ? Object.keys(districtData[stateName].districtData)\r\n                            .filter((d) => d !== 'Unknown')\r\n                            .sort((a, b) => {\r\n                              const districtB =\r\n                                districtData[stateName].districtData[b];\r\n                              const districtA =\r\n                                districtData[stateName].districtData[a];\r\n                              return (\r\n                                districtB[mapOption] - districtA[mapOption]\r\n                              );\r\n                            })\r\n                            .slice(0, showAllDistricts ? undefined : 5)\r\n                            .map((district, index) => {\r\n                              const cases =\r\n                                districtData[stateName].districtData[district];\r\n                              return (\r\n                                <div key={index} className=\"district\">\r\n                                  <h2>{cases[mapOption]}</h2>\r\n                                  <h5>{district}</h5>\r\n                                  {mapOption !== 'active' && (\r\n                                    <div className=\"delta\">\r\n                                      <Icon.ArrowUp className={mapOption} />\r\n                                      <h6 className={mapOption}>\r\n                                        {cases.delta[mapOption]}\r\n                                      </h6>\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                              );\r\n                            })\r\n                        : ''}\r\n                    </div>\r\n                    {districtData[stateName] &&\r\n                      Object.keys(districtData[stateName].districtData).length >\r\n                        5 && (\r\n                        <button\r\n                          className=\"button\"\r\n                          onClick={toggleShowAllDistricts}\r\n                        >\r\n                          {showAllDistricts ? `View less` : `View all`}\r\n                        </button>\r\n                      )}\r\n                  </div>\r\n                  <div className=\"district-bar-right\">\r\n                    {(mapOption === 'confirmed' ||\r\n                      mapOption === 'deceased') && (\r\n                      <div\r\n                        className=\"happy-sign fadeInUp\"\r\n                        style={{animationDelay: '0.6s'}}\r\n                      >\r\n                        {timeseries\r\n                          .slice(-5)\r\n                          .every((day) => day[`daily${mapOption}`] === 0) && (\r\n                          <div\r\n                            className={`alert ${\r\n                              mapOption === 'confirmed' ? 'is-green' : ''\r\n                            }`}\r\n                          >\r\n                            <Icon.Smile />\r\n                            <div className=\"alert-right\">\r\n                              No new {mapOption} cases in the past five days\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                    {\r\n                      <DeltaBarGraph\r\n                        timeseries={timeseries.slice(-5)}\r\n                        arrayKey={`daily${mapOption}`}\r\n                      />\r\n                    }\r\n                  </div>\r\n                </div>\r\n\r\n                {false && (\r\n                  <Link to=\"/essentials\">\r\n                    <div\r\n                      className=\"to-essentials fadeInUp\"\r\n                      style={{animationDelay: '0.9s'}}\r\n                    >\r\n                      <h2>Go to essentials</h2>\r\n                      <Icon.ArrowRightCircle />\r\n                    </div>\r\n                  </Link>\r\n                )}\r\n\r\n                <TimeSeriesExplorer timeseries={timeseries} />\r\n              </React.Fragment>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"state-left\">\r\n            <div className=\"Clusters fadeInUp\" style={{animationDelay: '0.8s'}}>\r\n              <h1>Network of Transmission</h1>\r\n              <Clusters stateCode={stateCode} />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"state-right\"></div>\r\n        </div>\r\n        <Footer />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default React.memo(State);\r\n"],"sourceRoot":""}