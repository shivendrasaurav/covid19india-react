{"version":3,"sources":["components/downloadblock.js","components/patientsview.js","components/patients.js","components/patientdb.js"],"names":["React","memo","props","className","style","animationDelay","target","href","PatientsView","logs","summary","setModal","setPatient","expand","applyClass","Object","keys","slice","map","day","index","Fragment","key","format","Date","length","patient","indexTwo","onClick","patientnumber","Patients","useState","patients","setPatients","setLogs","modal","useLockBodyScroll","window","onclick","event","document","getElementById","useKeyPressEvent","useEffect","parseByDate","useCallback","log","i","parse","dateannounced","list","push","colorMode","gender","typeoftransmission","nationality","getClassNameFn","id","patientIndexArg","patientIndex","err","console","switchPatient","contractedfromwhichpatientsuspected","detectedcity","detecteddistrict","detectedstate","agebracket","statepatientnumber","notes","source1","source2","source3","filterByObject","obj","filters","filter","p","every","PatientDB","fetched","setFetched","filteredPatients","setFilteredPatients","pathname","useLocation","setColorMode","scaleMode","setScaleMode","subDays","filterDate","setFilterDate","useLocalStorage","showReminder","setShowReminder","message","setMessage","loading","setLoading","setFilters","scrollTo","useEffectOnce","axios","get","then","response","data","raw_data","reverse","querySelectorAll","forEach","el","setAttribute","handleFilters","label","value","f","newFilters","district","city","display","selectedIndex","getSortedValues","setValues","Set","size","add","Array","from","sort","Helmet","name","content","onChange","defaultValue","disabled","state","minDate","maxDate","calendarIcon","inputProps","onkeydown","e","preventDefault","clearIcon","date","fomattedDate","type","checked"],"mappings":"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","file":"static/js/9.dd38933e.chunk.js","sourcesContent":["import React from 'react';\r\nimport * as Icon from 'react-feather';\r\n\r\nfunction DownloadBlock(props) {\r\n  return (\r\n    <div className=\"DownloadBlock fadeInUp\" style={{animationDelay: '0.5s'}}>\r\n      <a\r\n        className=\"button\"\r\n        target=\"_noblank\"\r\n        href=\"https://raw.githubusercontent.com/covid19india/api/gh-pages/raw_data.json\"\r\n      >\r\n        <Icon.Download /> <span>JSON</span>\r\n      </a>\r\n      <a\r\n        className=\"button\"\r\n        target=\"_noblank\"\r\n        href=\"https://raw.githubusercontent.com/covid19india/api/gh-pages/csv/latest/raw_data.csv\"\r\n      >\r\n        <Icon.Download /> <span>CSV</span>\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(DownloadBlock, () => {\r\n  return true;\r\n});\r\n","import {format} from 'date-fns';\r\nimport React from 'react';\r\n\r\nfunction PatientsView({\r\n  logs,\r\n  summary,\r\n  setModal,\r\n  setPatient,\r\n  expand,\r\n  applyClass,\r\n}) {\r\n  return (\r\n    <div className=\"Patients fadeInUp\" style={{animationDelay: '1s'}}>\r\n      {Object.keys(logs)\r\n        .slice(summary ? -1 : 0)\r\n        .map((day, index) => {\r\n          if (day !== 'Invalid Date') {\r\n            return (\r\n              <React.Fragment key={index}>\r\n                <h5 className=\"daylabel\">\r\n                  {format(new Date(day), 'dd MMM, yyyy')}{' '}\r\n                  {'(' + logs[day].length + ')'}\r\n                </h5>\r\n                <div key={index} className={`day ${summary ? 'summary' : ''}`}>\r\n                  {logs[day]\r\n                    .slice(summary ? -40 : 0)\r\n                    .map((patient, indexTwo) => {\r\n                      return (\r\n                        <div\r\n                          key={indexTwo}\r\n                          className={applyClass(patient)}\r\n                          onClick={() => {\r\n                            setModal(true);\r\n                            setPatient(patient);\r\n                          }}\r\n                        >\r\n                          <h3>{expand ? `P${patient.patientnumber}` : ''}</h3>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                </div>\r\n              </React.Fragment>\r\n            );\r\n          } else {\r\n            return null;\r\n          }\r\n        })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PatientsView;\r\n","import PatientsView from './patientsview';\r\n\r\nimport {parse} from 'date-fns';\r\nimport React, {useState, useEffect, useCallback} from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {useLockBodyScroll, useKeyPressEvent} from 'react-use';\r\n\r\nfunction Patients(props) {\r\n  const [patients, setPatients] = useState(props.patients);\r\n  const [patient, setPatient] = useState(props.patients.slice(-1));\r\n  const [logs, setLogs] = useState({});\r\n  const [modal, setModal] = useState(false);\r\n\r\n  useLockBodyScroll(modal);\r\n\r\n  window.onclick = function (event) {\r\n    const modal = document.getElementById('modal');\r\n    if (event.target === modal) {\r\n      setModal(false);\r\n    }\r\n  };\r\n\r\n  useKeyPressEvent('Escape', () => {\r\n    setModal(false);\r\n  });\r\n\r\n  useEffect(() => {\r\n    setPatients(props.patients);\r\n  }, [props.patients]);\r\n\r\n  const parseByDate = useCallback((patients) => {\r\n    const log = {};\r\n    for (let i = 0; i < patients.length; i++) {\r\n      const day = new Date(\r\n        parse(patients[i].dateannounced, 'dd/MM/yyyy', new Date())\r\n      );\r\n      if (!(day in log)) {\r\n        const list = [];\r\n        list.push(patients[i]);\r\n        log[day] = list;\r\n      } else {\r\n        const list = log[day];\r\n        list.push(patients[i]);\r\n        log[day] = list;\r\n      }\r\n    }\r\n    setLogs(log);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (patients.length) {\r\n      parseByDate(patients);\r\n    }\r\n  }, [parseByDate, patients]);\r\n\r\n  const switchPatient = (patientIndexArg) => {\r\n    if (patientIndexArg === '') return;\r\n    try {\r\n      const patientIndex = patientIndexArg.slice(1);\r\n      // eslint-disable-next-line\r\n      patients.map((patient, index) => {\r\n        if (patient.patientnumber === patientIndex) setPatient(patient);\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const getClassNameFn = (colorMode) => {\r\n    switch (colorMode) {\r\n      case 'genders':\r\n        return (patient) => {\r\n          return `patient-card ${\r\n            patient.gender === 'F'\r\n              ? 'is-femme'\r\n              : patient.gender === 'M'\r\n              ? 'is-male'\r\n              : ''\r\n          } ${props.expand ? '' : 'is-small'}`;\r\n        };\r\n      case 'transmission':\r\n        return (patient) => {\r\n          return `patient-card ${\r\n            patient.typeoftransmission === 'Local'\r\n              ? 'is-local'\r\n              : patient.typeoftransmission === 'Imported'\r\n              ? 'is-imported'\r\n              : ''\r\n          } ${props.expand ? '' : 'is-small'}`;\r\n        };\r\n      case 'nationality':\r\n        return (patient) => {\r\n          return `patient-card ${\r\n            patient.nationality === 'India'\r\n              ? 'is-in'\r\n              : patient.nationality === 'Myanmar'\r\n              ? 'is-mm'\r\n              : patient.nationality === 'Indonesia'\r\n              ? 'is-id'\r\n              : patient.nationality === 'United Kingdom'\r\n              ? 'is-uk'\r\n              : patient.nationality === 'United States of America'\r\n              ? 'is-us'\r\n              : patient.nationality === 'Thailand'\r\n              ? 'is-th'\r\n              : patient.nationality === 'Phillipines'\r\n              ? 'is-ph'\r\n              : patient.nationality === 'Italy'\r\n              ? 'is-it'\r\n              : patient.nationality === 'Canada'\r\n              ? 'is-ca'\r\n              : ''\r\n          } ${props.expand ? '' : 'is-small'}`;\r\n        };\r\n      case 'age':\r\n        return (patient) => {\r\n          return `patient-card ${props.expand ? '' : 'is-small'}`;\r\n        };\r\n      default:\r\n        return (patient) => {\r\n          return `patient-card ${props.expand ? '' : 'is-small'}`;\r\n        };\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <PatientsView\r\n        logs={logs}\r\n        setModal={setModal}\r\n        setPatient={setPatient}\r\n        expand={props.expand}\r\n        applyClass={getClassNameFn(props.colorMode)}\r\n      />\r\n\r\n      {modal && (\r\n        <div className=\"modal\" id=\"modal\">\r\n          <div\r\n            className={`modal-content ${modal ? 'fadeInUp' : 'fadeOutDown'}`}\r\n          >\r\n            <div className=\"close-button\">\r\n              <Icon.XCircle\r\n                onClick={() => {\r\n                  setModal(false);\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"modal-top\">\r\n              <h1>#{patient.patientnumber}</h1>\r\n            </div>\r\n\r\n            <div className=\"meta\">\r\n              <h5>Date Announced</h5>\r\n              <h3>{patient.dateannounced ? patient.dateannounced : '?'}</h3>\r\n\r\n              <h5>Contracted from</h5>\r\n              <h3\r\n                className=\"contracted-from\"\r\n                onClick={() => {\r\n                  switchPatient(patient.contractedfromwhichpatientsuspected);\r\n                }}\r\n              >\r\n                {patient.contractedfromwhichpatientsuspected\r\n                  ? patient.contractedfromwhichpatientsuspected\r\n                  : '?'}\r\n              </h3>\r\n\r\n              <h5>Detected City</h5>\r\n              <h3>{patient.detectedcity ? patient.detectedcity : '?'}</h3>\r\n\r\n              <h5>Detected District</h5>\r\n              <h3>\r\n                {patient.detecteddistrict ? patient.detecteddistrict : '?'}\r\n              </h3>\r\n\r\n              <h5>Detected State</h5>\r\n              <h3>{patient.detectedstate ? patient.detectedstate : '?'}</h3>\r\n\r\n              <h5>Nationality</h5>\r\n              <h3>{patient.nationality ? patient.nationality : '?'}</h3>\r\n\r\n              <h5>Age</h5>\r\n              <h3>{patient.agebracket ? patient.agebracket : '?'}</h3>\r\n\r\n              <h5>Gender</h5>\r\n              <h3>{patient.gender ? patient.gender : '?'}</h3>\r\n\r\n              <h5>State Patient Number</h5>\r\n              <h3>\r\n                {patient.statepatientnumber ? patient.statepatientnumber : '?'}\r\n              </h3>\r\n\r\n              <h5>Type of transmission</h5>\r\n              <h3>\r\n                {patient.typeoftransmission ? patient.typeoftransmission : '?'}\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"notes\">\r\n              <h5>Notes</h5>\r\n              <h3>{patient.notes}</h3>\r\n            </div>\r\n\r\n            <h5>Source 1</h5>\r\n            <div className=\"link\">\r\n              <a href={patient.source1} target=\"_noblank\">\r\n                {patient.source1}\r\n              </a>\r\n            </div>\r\n\r\n            <h5>Source 2</h5>\r\n            <div className=\"link\">\r\n              <a href={patient.source2} target=\"_noblank\">\r\n                {patient.source2}\r\n              </a>\r\n            </div>\r\n\r\n            <h5>Source 3</h5>\r\n            <div className=\"link\">\r\n              <a href={patient.source3} target=\"_noblank\">\r\n                {patient.source3}\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Patients;\r\n","import DownloadBlock from './downloadblock';\r\nimport Footer from './footer';\r\nimport Patients from './patients';\r\n\r\nimport axios from 'axios';\r\nimport {format, subDays} from 'date-fns';\r\nimport React, {useState, useEffect} from 'react';\r\nimport DatePicker from 'react-date-picker';\r\nimport * as Icon from 'react-feather';\r\nimport {Helmet} from 'react-helmet';\r\nimport {useLocation} from 'react-router-dom';\r\nimport {useEffectOnce, useLocalStorage} from 'react-use';\r\n\r\nfunction filterByObject(obj, filters) {\r\n  const keys = Object.keys(filters);\r\n  return obj.filter((p) => {\r\n    return keys.every((key) => {\r\n      if (!filters[key].length) return true;\r\n      return p[key] === filters[key];\r\n    });\r\n  });\r\n}\r\n\r\nfunction PatientDB(props) {\r\n  const [fetched, setFetched] = useState(false);\r\n  const [patients, setPatients] = useState([]);\r\n  const [filteredPatients, setFilteredPatients] = useState([]);\r\n  const {pathname} = useLocation();\r\n  const [colorMode, setColorMode] = useState('genders');\r\n  const [scaleMode, setScaleMode] = useState(false);\r\n  const [filterDate, setFilterDate] = useState(subDays(new Date(), 1));\r\n  const [showReminder, setShowReminder] = useLocalStorage('showReminder', true);\r\n  const [message, setMessage] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filters, setFilters] = useState({\r\n    detectedstate: '',\r\n    detecteddistrict: '',\r\n    detectedcity: '',\r\n    dateannounced: format(subDays(new Date(), 1), 'dd/MM/yyyy'),\r\n  });\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]);\r\n\r\n  useEffectOnce(() => {\r\n    try {\r\n      axios\r\n        .get('https://api.covid19india.org/raw_data3.json')\r\n        .then((response) => {\r\n          setPatients(response.data.raw_data.reverse());\r\n          setFetched(true);\r\n        });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const datePickers = document.querySelectorAll(\r\n      '.react-date-picker__inputGroup input'\r\n    );\r\n    datePickers.forEach((el) => el.setAttribute('readOnly', true));\r\n  }, []);\r\n\r\n  const handleFilters = (label, value) => {\r\n    setFilters((f) => {\r\n      // Create new object (deep copy)\r\n      const newFilters = {...f};\r\n      newFilters[label] = value;\r\n      if (label === 'detectedstate') {\r\n        const district = document.getElementById('district');\r\n        const city = document.getElementById('city');\r\n        // Hide boxes\r\n        if (value === '') district.style.display = 'none';\r\n        else district.style.display = 'inline';\r\n        city.style.display = 'none';\r\n        // Default to empty selection\r\n        district.selectedIndex = 0;\r\n        city.selectedIndex = 0;\r\n        newFilters['detecteddistrict'] = '';\r\n        newFilters['detectedcity'] = '';\r\n      } else if (label === 'detecteddistrict') {\r\n        const city = document.getElementById('city');\r\n        // Hide box\r\n        if (value === '') city.style.display = 'none';\r\n        else city.style.display = 'inline';\r\n        // Default to empty selection\r\n        city.selectedIndex = 0;\r\n        newFilters['detectedcity'] = '';\r\n      }\r\n      return newFilters;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (filterByObject(patients, filters).length > 0) {\r\n      setFilteredPatients(filterByObject(patients, filters));\r\n      setMessage(false);\r\n      setLoading(false);\r\n    } else {\r\n      setMessage(true);\r\n    }\r\n  }, [patients, filters]);\r\n\r\n  function getSortedValues(obj, key) {\r\n    const setValues = new Set(obj.map((p) => p[key]));\r\n    if (setValues.size > 1) setValues.add('');\r\n    if (key === 'dateannounced') return Array.from(setValues);\r\n    return Array.from(setValues).sort();\r\n  }\r\n\r\n  return (\r\n    <div className=\"PatientsDB\">\r\n      <Helmet>\r\n        <title>Demographics - covid19india.org</title>\r\n        <meta name=\"title\" content={`Demographics - covid19india.org`} />\r\n        <meta\r\n          name=\"description\"\r\n          content=\"A demographical overview of the Indian population affected by the coronavirus.\"\r\n        />\r\n      </Helmet>\r\n\r\n      <div className=\"filters fadeInUp\" style={{animationDelay: '0.2s'}}>\r\n        <div className=\"filters-left\">\r\n          <div className=\"select\">\r\n            <select\r\n              style={{animationDelay: '0.3s'}}\r\n              id=\"state\"\r\n              onChange={(event) => {\r\n                handleFilters('detectedstate', event.target.value);\r\n              }}\r\n              defaultValue={filters.detectedstate}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Select State\r\n              </option>\r\n              {getSortedValues(patients, 'detectedstate').map(\r\n                (state, index) => {\r\n                  return (\r\n                    <option key={index} value={state}>\r\n                      {state === '' ? 'All' : state}\r\n                    </option>\r\n                  );\r\n                }\r\n              )}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"select\">\r\n            <select\r\n              style={{animationDelay: '0.4s', display: 'none'}}\r\n              id=\"district\"\r\n              onChange={(event) => {\r\n                handleFilters('detecteddistrict', event.target.value);\r\n              }}\r\n              defaultValue={filters.detecteddistrict}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Select District\r\n              </option>\r\n              {getSortedValues(\r\n                filterByObject(patients, {\r\n                  detectedstate: filters.detectedstate,\r\n                }),\r\n                'detecteddistrict'\r\n              ).map((district, index) => {\r\n                return (\r\n                  <option key={index} value={district}>\r\n                    {district === '' ? 'All' : district}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"select\">\r\n            <select\r\n              style={{animationDelay: '0.4s', display: 'none'}}\r\n              id=\"city\"\r\n              onChange={(event) => {\r\n                handleFilters('detectedcity', event.target.value);\r\n              }}\r\n              defaultValue={filters.detectedcity}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Select City\r\n              </option>\r\n              {getSortedValues(\r\n                filterByObject(patients, {\r\n                  detectedstate: filters.detectedstate,\r\n                  detecteddistrict: filters.detecteddistrict,\r\n                }),\r\n                'detectedcity'\r\n              ).map((city, index) => {\r\n                return (\r\n                  <option key={index} value={city}>\r\n                    {city === '' ? 'All' : city}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"select\">\r\n            <select\r\n              style={{animationDelay: '0.4s', display: 'none'}}\r\n              id=\"city\"\r\n              onChange={(event) => {\r\n                handleFilters('detectedcity', event.target.value);\r\n              }}\r\n              defaultValue={filters.detectedcity}\r\n            >\r\n              <option value=\"\" disabled>\r\n                Select City\r\n              </option>\r\n              {getSortedValues(\r\n                filterByObject(patients, {\r\n                  detectedstate: filters.detectedstate,\r\n                  detecteddistrict: filters.detecteddistrict,\r\n                }),\r\n                'detectedcity'\r\n              ).map((city, index) => {\r\n                return (\r\n                  <option key={index} value={city}>\r\n                    {city === '' ? 'All' : city}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"select\">\r\n            <DatePicker\r\n              value={filterDate}\r\n              minDate={new Date('30-Jan-2020')}\r\n              maxDate={subDays(new Date(), 1)}\r\n              format=\"dd/MM/y\"\r\n              calendarIcon={<Icon.Calendar />}\r\n              inputProps={\r\n                (onkeydown = (e) => {\r\n                  e.preventDefault();\r\n                })\r\n              }\r\n              clearIcon={<Icon.XCircle />}\r\n              onChange={(date) => {\r\n                setFilterDate(date);\r\n                const fomattedDate = !!date ? format(date, 'dd/MM/yyyy') : '';\r\n                handleFilters('dateannounced', fomattedDate);\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {/* <div className=\"select\">\r\n            <select\r\n              style={{animationDelay: '0.4s'}}\r\n              onChange={(event) => {\r\n                handleFilters('dateannounced', event.target.value);\r\n              }}\r\n            >\r\n              {Array.from(new Set(patients.map((p) => p.dateannounced))).map(\r\n                (date, index) => {\r\n                  return (\r\n                    <option key={index} value={date}>\r\n                      {date}\r\n                    </option>\r\n                  );\r\n                }\r\n              )}\r\n            </select>\r\n          </div>*/}\r\n        </div>\r\n\r\n        <div className=\"legend\">\r\n          {colorMode === 'genders' && (\r\n            <div className=\"legend-left\">\r\n              <div className=\"circle is-female\"></div>\r\n              <h5 className=\"is-female\">Female</h5>\r\n              <div className=\"circle is-male\"></div>\r\n              <h5 className=\"is-male\">Male</h5>\r\n              <div className=\"circle\"></div>\r\n              <h5 className=\"\">Unknown</h5>\r\n            </div>\r\n          )}\r\n\r\n          {colorMode === 'transmission' && (\r\n            <div className=\"legend-left\">\r\n              <div className=\"circle is-local\"></div>\r\n              <h5 className=\"is-local\">Local</h5>\r\n              <div className=\"circle is-imported\"></div>\r\n              <h5 className=\"is-imported\">Imported</h5>\r\n              <div className=\"circle\"></div>\r\n              <h5 className=\"\">Unknown</h5>\r\n            </div>\r\n          )}\r\n\r\n          {colorMode === 'nationality' && (\r\n            <div className=\"legend-left nationality\">\r\n              <div className=\"circle is-in\"></div>\r\n              <h5 className=\"is-in\">In</h5>\r\n              <div className=\"circle is-uk\"></div>\r\n              <h5 className=\"is-uk\">Uk</h5>\r\n              <div className=\"circle is-us\"></div>\r\n              <h5 className=\"is-us\">Us</h5>\r\n              <div className=\"circle is-th\"></div>\r\n              <h5 className=\"is-thailand\">Th</h5>\r\n              <div className=\"circle is-ph\"></div>\r\n              <h5 className=\"is-ph\">Ph</h5>\r\n              <div className=\"circle is-it\"></div>\r\n              <h5 className=\"is-it\">It</h5>\r\n              <div className=\"circle is-ca\"></div>\r\n              <h5 className=\"is-ca\">Ca</h5>\r\n              <div className=\"circle is-id\"></div>\r\n              <h5 className=\"is-id\">Id</h5>\r\n              <div className=\"circle is-mm\"></div>\r\n              <h5 className=\"is-mm\">Mm</h5>\r\n            </div>\r\n          )}\r\n\r\n          <div className={`select ${colorMode}`}>\r\n            <select\r\n              style={{animationDelay: '0.4s'}}\r\n              onChange={(event) => {\r\n                setColorMode(event.target.value);\r\n              }}\r\n              defaultValue={colorMode}\r\n            >\r\n              {/* <option value=\"\" disabled>\r\n                Color modes\r\n              </option> */}\r\n              <option value=\"genders\">Genders</option>\r\n              <option value=\"transmission\">Transmission</option>\r\n              <option value=\"nationality\">Nationality</option>\r\n              {/* <option value=\"age\">Age</option>*/}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"header fadeInUp\" style={{animationDelay: '0.3s'}}>\r\n        <div>\r\n          <h1>Demographics</h1>\r\n\r\n          <div\r\n            className={`deep-dive ${\r\n              message || filteredPatients.length === 0 ? 'disabled' : ''\r\n            }`}\r\n          >\r\n            <h5>Expand</h5>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={scaleMode}\r\n              disabled={message || filteredPatients.length === 0}\r\n              onChange={(event) => {\r\n                setScaleMode(!scaleMode);\r\n              }}\r\n              className=\"switch\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <h6 className=\"disclaimer\">\r\n          Some of the data provided might be missing/unknown as the details have\r\n          not been shared by the state/central governments\r\n        </h6>\r\n      </div>\r\n\r\n      <div\r\n        className=\"reminder fadeInUp\"\r\n        style={{animationDelay: '1s', display: showReminder ? '' : 'none'}}\r\n      >\r\n        <Icon.XCircle\r\n          onClick={() => {\r\n            setShowReminder(false);\r\n          }}\r\n        />\r\n        <p>\r\n          It is important that we do not think of these as just tiny boxes,\r\n          numbers, or just another part of statistics - among these are our\r\n          neighbors, our teachers, our healthcare workers, our supermarket\r\n          vendors, our friends, our co-workers, our children or our\r\n          grandparents.\r\n          <br />\r\n          <br />\r\n          Among these are our people.\r\n        </p>\r\n      </div>\r\n\r\n      {fetched && (\r\n        <div className=\"patientdb-wrapper\">\r\n          {loading ? (\r\n            ' '\r\n          ) : message ? (\r\n            <div className=\"no-result\">\r\n              <h5>\r\n                There were no new cases in\r\n                <span>\r\n                  {filters.detectedcity.length > 0\r\n                    ? ` ${filters.detectedcity}, `\r\n                    : ''}\r\n                  {filters.detecteddistrict.length > 0\r\n                    ? ` ${filters.detecteddistrict}, `\r\n                    : ''}\r\n                  {' ' + filters.detectedstate}\r\n                </span>{' '}\r\n                on <span>{filters.dateannounced}.</span>\r\n              </h5>\r\n            </div>\r\n          ) : (\r\n            <Patients\r\n              patients={filteredPatients}\r\n              colorMode={colorMode}\r\n              expand={scaleMode}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <DownloadBlock patients={patients} />\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PatientDB;\r\n"],"sourceRoot":""}